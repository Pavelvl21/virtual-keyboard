(()=>{"use strict";const e={services:{AltRight:"alt",ControlRight:"ctrl",Backspace:"",Enter:"",ShiftRight:"",ArrowLeft:"",ArrowRight:"",ArrowUp:"",ArrowDown:"",CapsLock:"caps lock",ShiftLeft:"",ControlLeft:"ctrl",MetaLeft:"",AltLeft:"alt",Tab:"",Delete:"del"},digits:{Digit1:"1",Digit5:"5",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Space:" "},shifted:{Digit1:"!",Digit5:"%",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+"}},t={en:{keys:{KeyQ:"q",KeyW:"w",KeyE:"e",KeyR:"r",KeyT:"t",KeyY:"y",KeyU:"u",KeyI:"i",KeyO:"o",KeyP:"p",KeyA:"a",KeyS:"s",KeyD:"d",KeyF:"f",KeyG:"g",KeyH:"h",KeyJ:"j",KeyK:"k",KeyL:"l",KeyZ:"z",KeyX:"x",KeyC:"c",KeyV:"v",KeyB:"b",KeyN:"n",KeyM:"m"},digits:{Backquote:"`",Digit2:"2",Digit3:"3",Digit4:"4",Digit6:"6",Digit7:"7",Backslash:"\\",BracketLeft:"[",BracketRight:"]",Semicolon:";",Quote:"'",Comma:",",Period:".",Slash:"/"},shifted:{Backquote:"~",Digit2:"@",Digit3:"#",Digit4:"$",Digit6:"^",Digit7:"&",Backslash:"|",BracketLeft:"{",BracketRight:"}",Semicolon:":",Quote:'"',Comma:"<",Period:">",Slash:"?"}},ru:{keys:{KeyQ:"й",KeyW:"ц",KeyE:"у",KeyR:"к",KeyT:"е",KeyY:"н",KeyU:"г",KeyI:"ш",KeyO:"щ",KeyP:"з",BracketLeft:"х",BracketRight:"ъ",KeyA:"ф",KeyS:"ы",KeyD:"в",KeyF:"а",KeyG:"п",KeyH:"р",KeyJ:"о",KeyK:"л",KeyL:"д",Semicolon:"ж",Quote:"э",KeyZ:"я",KeyX:"ч",KeyC:"с",KeyV:"м",KeyB:"и",KeyN:"т",KeyM:"ь",Comma:"б",Period:"ю",Backquote:"ё"},digits:{Slash:".",Backslash:"\\",Digit2:"2",Digit3:"3",Digit4:"4",Digit6:"6",Digit7:"7"},shifted:{Slash:",",Backslash:"/",Digit2:'"',Digit3:"№",Digit4:";",Digit6:":",Digit7:"*"}},services:e.services,digits:e.digits,shifted:e.shifted},r=[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowUp","ArrowDown","ArrowRight","ControlRight"]],n=function(e,t){var r=e,n=r.value.split("").filter((function(e,r){return e&&r!==t})).join("");r.value=n,r.setSelectionRange(t,t)},i=function(e,t,r){var n=e,i=n.selectionStart,a=n.value.split(""),o=a.slice(0,i),s=a.slice(i),c=o.concat(r).concat(s).join("");n.value=c,n.setSelectionRange(t,t)},a=function(e){var t=e.value,r=e.selectionStart;return{data:t.split("\n"),splittedData:t.substring(0,r).split("\n")}};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e,t){return Object.hasOwn(e,t)};const d=function(e,r,n,i){var a=c(c(c(c({},t[r].keys),t[r].digits),t.digits),t.services),o=c(c(c({},t[r].keys),t[r].shifted),t.shifted),s=t[r].keys,l=a[e],d=s[e],y=o[e];return n&&i?u(o,e)?y.toLowerCase():l:n?u(s,e)?d.toUpperCase():l:i&&u(o,e)?y.toUpperCase():l};function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const f=function(e,o){var s,c=o.querySelector(".field"),l=o.querySelectorAll(".key");c.focus(),c.scrollTop=e.caretPosition;var u,f=e.pressedKey.code,g=e.lang,p=e.isCapsLock,h=e.isShifted,v=e.pressedKeys;l.forEach((function(e){var t=e,r=d(t.id,g,p,h);t.textContent=r,t.classList.remove("active")})),(u=v,function(e){if(Array.isArray(e))return y(e)}(u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){r.flat().includes(e)&&o.querySelector("#".concat(e)).classList.add("active")}));var K=t.services,m=null!==(s=d(f,g,p,h))&&void 0!==s?s:"",S=Object.hasOwn(K,f)?"":m,b=o.querySelector("#CapsLock");p?b.classList.add("higlight"):b.classList.remove("higlight");var L=c.selectionStart,D=c.selectionEnd;c.setRangeText(S,L,D,"end");var w={Backspace:K.Backspace,Delete:K.Delete,ArrowLeft:K.ArrowLeft,ArrowRight:K.ArrowRight,ArrowUp:K.ArrowUp,ArrowDown:K.ArrowDown,Tab:K.Tab,Enter:K.Enter},k={Backspace:function(e){return function(e){var t=e.selectionStart;n(e,0===t?null:t-1)}(e)},Delete:function(e){return function(e){var t=e.selectionStart;n(e,t)}(e)},Enter:function(e){return function(e){var t=e.selectionStart,r=e.value.split("").slice(0,t).length+1;i(e,r,"\n")}(e)},Tab:function(e){return function(e){var t=e.selectionStart,r=e.value.split("").slice(0,t).length+1;i(e,r,"\t")}(e)},ArrowLeft:function(e){return function(e){var t=e.selectionStart,r=0===t?0:t-1;e.setSelectionRange(r,r)}(e)},ArrowRight:function(e){return function(e){var t=e.selectionStart,r=e.value.length,n=t===r?r:t+1;e.setSelectionRange(n,n)}(e)},ArrowDown:function(e){return function(e){var t,r,n=a(e),i=n.data,o=n.splittedData,s=o.length,c=(null===(t=o[s-1])||void 0===t?void 0:t.length)||null,l=i.slice(0,s).join("\n").length,u=(null===(r=i[s])||void 0===r?void 0:r.length)||null,d=u<=c?u+l+1:c+l+1;e.setSelectionRange(d,d)}(e)},ArrowUp:function(e){return function(e){var t,r=a(e),n=r.data,i=r.splittedData,o=i.length-1,s=i[o].length,c=n.slice(0,o).join("\n").length,l=(null===(t=n[o-1])||void 0===t?void 0:t.length)||null,u=l>=s?c-l+s:c;e.setSelectionRange(u,u)}(e)}};Object.hasOwn(w,f)&&k[f](c)},g=function(e){var t={lang:e};localStorage.setItem("locale",JSON.stringify(t))},p=function(e,t){var r=t,n=e.querySelector(".field"),i=a(n).splittedData;i.length<12?r.caretPosition=0:r.caretPosition=18*(i.length-1)},h=function(e,t){e.isOpen?t.classList.remove("hidden"):t.classList.add("hidden"),t.querySelector(".field").classList.toggle("hidden-field")};var v=document.createElement("div");v.classList.add("board");var K=function(e){var t=document.createElement("button");return t.classList.add("key"),t.setAttribute("id",e),t};r.forEach((function(e){var t=document.createElement("div");t.classList.add("row");var r=document.createElement("div");r.classList.add("arrows"),e.forEach((function(e){e.includes("Arrow")?function(e,t,r){t.append(K(r)),e.append(t)}(t,r,e):t.append(K(e))})),v.append(t)}));var m=document.createElement("main");m.classList.add("main");var S=document.createElement("section");S.classList.add("keyboard");var b=document.createElement("div");b.classList.add("author-info");var L=document.createElement("span");L.textContent="creeted by ";var D=document.createElement("a");D.classList.add("link"),D.setAttribute("href","https://github.com/Pavelvl21"),D.setAttribute("target","_blank"),D.setAttribute("name","author"),D.textContent="Pavel Yudenka",b.append(L,D);var w=document.createElement("textarea");w.classList.add("field");var k=document.createElement("div");k.classList.add("wrapper");var A=document.createElement("button");A.classList.add("wrapper-button"),k.append(A,w),S.append(k,b,v),m.append(S);const E=m;var C=document.createElement("footer");C.classList.add("footer");var O=document.createElement("h1");O.classList.add("title"),O.textContent="Windows 10 Keyboard";var R=document.createElement("h2");R.classList.add("description"),R.textContent='To change the Keyboard Language use "alt" + "ctrl" keys',C.append(O,R);const j=C;function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=document.body;P.classList.add("body"),P.append(E,j);var q=E.querySelector(".board"),T=E.querySelector(".wrapper-button"),U=E.querySelector(".wrapper"),I={lang:(JSON.parse(localStorage.getItem("locale"))||{lang:"en"}).lang,pressedKey:{},pressedKeys:new Set,isCapsLock:!1,isShifted:!1,isOpen:!1,caretPosition:0};h(I,U),setTimeout((function(){I.isOpen=!0,h(I,U)}),1e3);var M=function(){I.isOpen=!I.isOpen,h(I,U)},x=function(e){var t=e.target,r=t.textContent,n=t.id;I.pressedKey={code:n,key:r},"CapsLock"===n&&!e.repeat&&(I.isCapsLock=!I.isCapsLock),p(E,I),f(I,E)},Q=function(e){var t=e.target.id;t&&I.pressedKeys.add(t);var r,n=I.pressedKey,i=I.pressedKeys,a=n.code,o=i.has("AltLeft")||i.has("AltRight")||"AltLeft"===a||"AltRight"===a,s=i.has("ControlLeft")||i.has("ControlRight")||"ControlLeft"===a||"ControlRight"===a;o&&s&&2===(r=I.pressedKeys,function(e){if(Array.isArray(e))return B(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).length&&(I.lang="en"===I.lang?"ru":"en",g(I.lang),f(I,E)),"ShiftLeft"!==t&&"ShiftRight"!==t||(I.isShifted=!I.isShifted,f(I,E))},J=function(e){var t=e.target.id;t&&(I.pressedKeys.delete(t),f(I,E)),"ShiftLeft"!==t&&"ShiftRight"!==t||(I.isShifted=!I.isShifted,f(I,E))},N=function(e){var t=e.target.id;t&&I.pressedKeys.delete(t)},W=function(e){var t=e.code,r=e.key,n=e.altKey,i=e.ctrlKey,a=e.shiftKey,o=e.location,s=e.metaKey;t&&(I.pressedKey={code:t,key:r},I.pressedKeys.add(t),e.preventDefault());var c=I.pressedKeys,l=!(1!==o&&2!==o||s||a),u=c.has("AltLeft")||c.has("AltRight")||n,d=c.has("ControlLeft")||c.has("ControlRight")||i;!e.repeat&&u&&d&&l&&(I.lang="en"===I.lang?"ru":"en",g(I.lang),f(I,E)),a&&!e.repeat&&(I.isShifted=!0),"CapsLock"===t&&!e.repeat&&(I.isCapsLock=!I.isCapsLock),p(E,I),f(I,E)},Y=function(e){var t=e.code;I.pressedKey={},I.pressedKeys.delete(t),f(I,E),("ShiftLeft"===t||"ShiftRight"===t)&&I.isShifted&&(I.isShifted=!1,f(I,E))};T.addEventListener("click",M),q.addEventListener("click",x),q.addEventListener("mousedown",Q),q.addEventListener("mouseup",J),P.addEventListener("keydown",W),P.addEventListener("keyup",Y),E.addEventListener("mouseout",N),f(I,E)})();