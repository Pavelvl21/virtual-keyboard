(()=>{"use strict";const e={services:{AltRight:"alt",ControlRight:"ctrl",Backspace:"",Enter:"",ShiftRight:"",ArrowLeft:"",ArrowRight:"",ArrowUp:"",ArrowDown:"",CapsLock:"caps lock",ShiftLeft:"",ControlLeft:"ctrl",MetaLeft:"",AltLeft:"alt",Tab:"",Delete:"del"},digits:{Digit1:"1",Digit5:"5",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Space:" "},shifted:{Digit1:"!",Digit5:"%",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+"}},t={en:{keys:{KeyQ:"q",KeyW:"w",KeyE:"e",KeyR:"r",KeyT:"t",KeyY:"y",KeyU:"u",KeyI:"i",KeyO:"o",KeyP:"p",KeyA:"a",KeyS:"s",KeyD:"d",KeyF:"f",KeyG:"g",KeyH:"h",KeyJ:"j",KeyK:"k",KeyL:"l",KeyZ:"z",KeyX:"x",KeyC:"c",KeyV:"v",KeyB:"b",KeyN:"n",KeyM:"m"},digits:{Backquote:"`",Digit2:"2",Digit3:"3",Digit4:"4",Digit6:"6",Digit7:"7",Backslash:"\\",BracketLeft:"[",BracketRight:"]",Semicolon:";",Quote:"'",Comma:",",Period:".",Slash:"/"},shifted:{Backquote:"~",Digit2:"@",Digit3:"#",Digit4:"$",Digit6:"^",Digit7:"&",Backslash:"|",BracketLeft:"{",BracketRight:"}",Semicolon:":",Quote:'"',Comma:"<",Period:">",Slash:"?"}},ru:{keys:{KeyQ:"й",KeyW:"ц",KeyE:"у",KeyR:"к",KeyT:"е",KeyY:"н",KeyU:"г",KeyI:"ш",KeyO:"щ",KeyP:"з",BracketLeft:"х",BracketRight:"ъ",KeyA:"ф",KeyS:"ы",KeyD:"в",KeyF:"а",KeyG:"п",KeyH:"р",KeyJ:"о",KeyK:"л",KeyL:"д",Semicolon:"ж",Quote:"э",KeyZ:"я",KeyX:"ч",KeyC:"с",KeyV:"м",KeyB:"и",KeyN:"т",KeyM:"ь",Comma:"б",Period:"ю",Backquote:"ё"},digits:{Slash:".",Backslash:"\\",Digit2:"2",Digit3:"3",Digit4:"4",Digit6:"6",Digit7:"7"},shifted:{Slash:",",Backslash:"/",Digit2:'"',Digit3:"№",Digit4:";",Digit6:":",Digit7:"*"}},services:e.services,digits:e.digits,shifted:e.shifted},i=function(e,t){var i=e,r=i.value.split("").filter((function(e,i){return e&&i!==t})).join("");i.value=r,i.setSelectionRange(t,t)},r=function(e,t,i){var r=e,n=r.selectionStart,a=r.value.split(""),o=a.slice(0,n),s=a.slice(n),c=o.concat(i).concat(s).join("");r.value=c,r.setSelectionRange(t,t)},n=function(e){var t=e.value,i=e.selectionStart;return{data:t.split("\n"),splittedData:t.substring(0,i).split("\n")}};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l=function(e,t){return Object.hasOwn(e,t)};const d=function(e,i,r,n){var a=s(s(s(s({},t[i].keys),t[i].digits),t.digits),t.services),o=s(s(s({},t[i].keys),t[i].shifted),t.shifted),c=t[i].keys,d=a[e],u=c[e],y=o[e];return r&&n?l(o,e)?y.toLowerCase():d:r?l(c,e)?u.toUpperCase():d:n&&l(o,e)?y.toUpperCase():d};function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}const y=function(e,a){var o,s=a.querySelector(".field"),c=a.querySelectorAll(".key");s.focus(),s.scrollTop=e.carretPosition;var l,y=e.pressedKey.code,f=e.lang,g=e.isCapsLock,p=e.isShifted,h=e.pressedKeys;c.forEach((function(e){var t=e,i=d(t.id,f,g,p);t.textContent=i,t.classList.remove("active")})),(l=h,function(e){if(Array.isArray(e))return u(e)}(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){a.querySelector("#".concat(e)).classList.add("active")}));var v=t.services,K=null!==(o=d(y,f,g,p))&&void 0!==o?o:"",m=Object.hasOwn(v,y)?"":K,S=a.querySelector("#CapsLock");g?S.classList.add("higlight"):S.classList.remove("higlight");var L=s.selectionStart,b=s.selectionEnd;s.setRangeText(m,L,b,"end");var D={Backspace:v.Backspace,Delete:v.Delete,ArrowLeft:v.ArrowLeft,ArrowRight:v.ArrowRight,ArrowUp:v.ArrowUp,ArrowDown:v.ArrowDown,Tab:v.Tab,Enter:v.Enter},k={Backspace:function(e){return function(e){var t=e.selectionStart;i(e,0===t?null:t-1)}(e)},Delete:function(e){return function(e){var t=e.selectionStart;i(e,t)}(e)},Enter:function(e){return function(e){var t=e.selectionStart,i=e.value.split("").slice(0,t).length+1;r(e,i,"\n")}(e)},Tab:function(e){return function(e){var t=e.selectionStart,i=e.value.split("").slice(0,t).length+1;r(e,i,"\t")}(e)},ArrowLeft:function(e){return function(e){var t=e.selectionStart,i=0===t?0:t-1;e.setSelectionRange(i,i)}(e)},ArrowRight:function(e){return function(e){var t=e.selectionStart,i=e.value.length,r=t===i?i:t+1;e.setSelectionRange(r,r)}(e)},ArrowDown:function(e){return function(e){var t,i,r=n(e),a=r.data,o=r.splittedData,s=o.length,c=(null===(t=o[s-1])||void 0===t?void 0:t.length)||null,l=a.slice(0,s).join("\n").length,d=(null===(i=a[s])||void 0===i?void 0:i.length)||null,u=d<=c?d+l+1:c+l+1;e.setSelectionRange(u,u)}(e)},ArrowUp:function(e){return function(e){var t,i=n(e),r=i.data,a=i.splittedData,o=a.length-1,s=a[o].length,c=r.slice(0,o).join("\n").length,l=(null===(t=r[o-1])||void 0===t?void 0:t.length)||null,d=l>=s?c-l+s:c;e.setSelectionRange(d,d)}(e)}};Object.hasOwn(D,y)&&k[y](s)},f=function(e){var t={lang:e};localStorage.setItem("locale",JSON.stringify(t))},g=function(e,t){var i=t,r=e.querySelector(".field"),a=n(r).splittedData;i.carretPosition=18*(a.length-1)},p=function(e,t){e.isOpen?t.classList.remove("hidden"):t.classList.add("hidden"),t.querySelector(".field").classList.toggle("hidden-field")};var h=document.createElement("div");h.classList.add("board");var v=function(e){var t=document.createElement("button");return t.classList.add("key"),t.setAttribute("id",e),t};[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowUp","ArrowDown","ArrowRight","ControlRight"]].forEach((function(e){var t=document.createElement("div");t.classList.add("row");var i=document.createElement("div");i.classList.add("arrows"),e.forEach((function(e){e.includes("Arrow")?function(e,t,i){t.append(v(i)),e.append(t)}(t,i,e):t.append(v(e))})),h.append(t)}));var K=document.createElement("main");K.classList.add("main");var m=document.createElement("section");m.classList.add("keyboard");var S=document.createElement("div");S.classList.add("author-info");var L=document.createElement("span");L.textContent="creeted by ";var b=document.createElement("a");b.classList.add("link"),b.setAttribute("href","https://github.com/Pavelvl21"),b.setAttribute("target","_blank"),b.setAttribute("name","author"),b.textContent="Pavel Yudenka",S.append(L,b);var D=document.createElement("textarea");D.classList.add("field");var k=document.createElement("div");k.classList.add("wrapper");var w=document.createElement("button");w.classList.add("wrapper-button"),k.append(w,D),m.append(k,S,h),K.append(m);const A=K;var E=document.createElement("footer");E.classList.add("footer");var C=document.createElement("h1");C.classList.add("title"),C.textContent="Windows 10 Keyboard";var O=document.createElement("h2");O.classList.add("description"),O.textContent='To change the Keyboard Language use "alt" + "ctrl" keys',E.append(C,O);const R=E;var j=document.body;j.classList.add("body"),j.append(A,R);var B=A.querySelector(".board"),P=A.querySelector(".wrapper-button"),q=A.querySelector(".wrapper"),T={lang:(JSON.parse(localStorage.getItem("locale"))||{lang:"en"}).lang,pressedKey:{},pressedKeys:new Set,isCapsLock:!1,isShifted:!1,isOpen:!1,carretPosition:0};p(T,q),setTimeout((function(){T.isOpen=!0,p(T,q)}),1e3);var U=function(){T.isOpen=!T.isOpen,p(T,q)},x=function(e){var t=e.target,i=t.textContent,r=t.id;T.pressedKey={code:r,key:i},"CapsLock"===r&&!e.repeat&&(T.isCapsLock=!T.isCapsLock),g(A,T),y(T,A)},M=function(e){var t=e.target.id;t&&T.pressedKeys.add(t);var i=T.pressedKey,r=T.pressedKeys,n=i.code,a=r.has("AltLeft")||r.has("AltRight")||"AltLeft"===n||"AltRight"===n,o=r.has("ControlLeft")||r.has("ControlRight")||"ControlLeft"===n||"ControlRight"===n;a&&o&&(T.lang="en"===T.lang?"ru":"en",f(T.lang),y(T,A)),"ShiftLeft"!==t&&"ShiftRight"!==t||(T.isShifted=!T.isShifted,y(T,A))},I=function(e){var t=e.target.id;t&&(T.pressedKeys.delete(t),y(T,A)),"ShiftLeft"!==t&&"ShiftRight"!==t||(T.isShifted=!T.isShifted,y(T,A))},Q=function(e){var t=e.target.id;t&&(T.pressedKeys.delete(t),y(T,A))},J=function(e){var t=e.code,i=e.key,r=e.altKey,n=e.ctrlKey,a=e.shiftKey,o=e.location,s=e.metaKey;t&&(T.pressedKey={code:t,key:i},T.pressedKeys.add(t),e.preventDefault());var c=T.pressedKeys,l=!(1!==o&&2!==o||s||a),d=c.has("AltLeft")||c.has("AltRight")||r,u=c.has("ControlLeft")||c.has("ControlRight")||n;!e.repeat&&d&&u&&l&&(T.lang="en"===T.lang?"ru":"en",f(T.lang),y(T,A)),a&&!e.repeat&&(T.isShifted=!0),"CapsLock"===t&&!e.repeat&&(T.isCapsLock=!T.isCapsLock),g(A,T),y(T,A)},N=function(e){var t=e.code;T.pressedKey={},T.pressedKeys.delete(t),y(T,A),("ShiftLeft"===t||"ShiftRight"===t)&&T.isShifted&&(T.isShifted=!1,y(T,A))};P.addEventListener("click",U),B.addEventListener("click",x),B.addEventListener("mousedown",M),B.addEventListener("mouseup",I),j.addEventListener("keydown",J),j.addEventListener("keyup",N),A.addEventListener("mouseout",Q),y(T,A)})();