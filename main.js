(()=>{"use strict";const e={services:{AltRight:"alt",ControlRight:"ctrl",Backspace:"",Enter:"",ShiftRight:"",ArrowLeft:"",ArrowRight:"",ArrowUp:"",ArrowDown:"",CapsLock:"caps lock",ShiftLeft:"",ControlLeft:"ctrl",MetaLeft:"",AltLeft:"alt",Tab:"",Delete:"del"},digits:{Digit1:"1",Digit5:"5",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Space:" "},shifted:{Digit1:"!",Digit5:"%",Digit8:"*",Digit9:"(",Digit0:")",Minus:"_",Equal:"+"}},t={en:{keys:{KeyQ:"q",KeyW:"w",KeyE:"e",KeyR:"r",KeyT:"t",KeyY:"y",KeyU:"u",KeyI:"i",KeyO:"o",KeyP:"p",KeyA:"a",KeyS:"s",KeyD:"d",KeyF:"f",KeyG:"g",KeyH:"h",KeyJ:"j",KeyK:"k",KeyL:"l",KeyZ:"z",KeyX:"x",KeyC:"c",KeyV:"v",KeyB:"b",KeyN:"n",KeyM:"m"},digits:{Backquote:"`",Digit2:"2",Digit3:"3",Digit4:"4",Digit6:"6",Digit7:"7",Backslash:"\\",BracketLeft:"[",BracketRight:"]",Semicolon:";",Quote:"'",Comma:",",Period:".",Slash:"/"},shifted:{Backquote:"~",Digit2:"@",Digit3:"#",Digit4:"$",Digit6:"^",Digit7:"&",Backslash:"|",BracketLeft:"{",BracketRight:"}",Semicolon:":",Quote:'"',Comma:"<",Period:">",Slash:"?"}},ru:{keys:{KeyQ:"й",KeyW:"ц",KeyE:"у",KeyR:"к",KeyT:"е",KeyY:"н",KeyU:"г",KeyI:"ш",KeyO:"щ",KeyP:"з",BracketLeft:"х",BracketRight:"ъ",KeyA:"ф",KeyS:"ы",KeyD:"в",KeyF:"а",KeyG:"п",KeyH:"р",KeyJ:"о",KeyK:"л",KeyL:"д",Semicolon:"ж",Quote:"э",KeyZ:"я",KeyX:"ч",KeyC:"с",KeyV:"м",KeyB:"и",KeyN:"т",KeyM:"ь",Comma:"б",Period:"ю",Backquote:"ё"},digits:{Slash:".",Backslash:"\\",Digit2:"2",Digit3:"3",Digit4:"4",Digit6:"6",Digit7:"7"},shifted:{Slash:",",Backslash:"/",Digit2:'"',Digit3:"№",Digit4:";",Digit6:":",Digit7:"*"}},services:e.services,digits:e.digits,shifted:e.shifted},i=[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowUp","ArrowDown","ArrowRight","ControlRight"]],r=function(e,t){var i=e,r=i.value.split("").filter((function(e,i){return e&&i!==t})).join("");i.value=r,i.setSelectionRange(t,t)},n=function(e,t,i){var r=e,n=r.selectionStart,a=r.value.split(""),o=a.slice(0,n),s=a.slice(n),c=o.concat(i).concat(s).join("");r.value=c,r.setSelectionRange(t,t)},a=function(e){var t=e.value,i=e.selectionStart;return{data:t.split("\n"),splittedData:t.substring(0,i).split("\n")}};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return(t=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d=function(e,t){return Object.hasOwn(e,t)};const u=function(e,i,r,n){var a=c(c(c(c({},t[i].keys),t[i].digits),t.digits),t.services),o=c(c(c({},t[i].keys),t[i].shifted),t.shifted),s=t[i].keys,l=a[e],u=s[e],y=o[e];return r&&n?d(o,e)?y.toLowerCase():l:r?d(s,e)?u.toUpperCase():l:n&&d(o,e)?y.toUpperCase():l};function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}const f=function(e,o){var s,c=o.querySelector(".field"),l=o.querySelectorAll(".key");c.focus(),c.scrollTop=e.caretPosition;var d,f=e.pressedKey.code,g=e.lang,p=e.isCapsLock,h=e.isShifted,v=e.pressedKeys;l.forEach((function(e){var t=e,i=u(t.id,g,p,h);t.textContent=i,t.classList.remove("active")})),(d=v,function(e){if(Array.isArray(e))return y(e)}(d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(e,t):void 0}}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){i.flat().includes(e)&&o.querySelector("#".concat(e)).classList.add("active")}));var K=t.services,m=null!==(s=u(f,g,p,h))&&void 0!==s?s:"",S=Object.hasOwn(K,f)?"":m,L=o.querySelector("#CapsLock");p?L.classList.add("higlight"):L.classList.remove("higlight");var b=c.selectionStart,D=c.selectionEnd;c.setRangeText(S,b,D,"end");var k={Backspace:K.Backspace,Delete:K.Delete,ArrowLeft:K.ArrowLeft,ArrowRight:K.ArrowRight,ArrowUp:K.ArrowUp,ArrowDown:K.ArrowDown,Tab:K.Tab,Enter:K.Enter},w={Backspace:function(e){return function(e){var t=e.selectionStart;r(e,0===t?null:t-1)}(e)},Delete:function(e){return function(e){var t=e.selectionStart;r(e,t)}(e)},Enter:function(e){return function(e){var t=e.selectionStart,i=e.value.split("").slice(0,t).length+1;n(e,i,"\n")}(e)},Tab:function(e){return function(e){var t=e.selectionStart,i=e.value.split("").slice(0,t).length+1;n(e,i,"\t")}(e)},ArrowLeft:function(e){return function(e){var t=e.selectionStart,i=0===t?0:t-1;e.setSelectionRange(i,i)}(e)},ArrowRight:function(e){return function(e){var t=e.selectionStart,i=e.value.length,r=t===i?i:t+1;e.setSelectionRange(r,r)}(e)},ArrowDown:function(e){return function(e){var t,i,r=a(e),n=r.data,o=r.splittedData,s=o.length,c=(null===(t=o[s-1])||void 0===t?void 0:t.length)||null,l=n.slice(0,s).join("\n").length,d=(null===(i=n[s])||void 0===i?void 0:i.length)||null,u=d<=c?d+l+1:c+l+1;e.setSelectionRange(u,u)}(e)},ArrowUp:function(e){return function(e){var t,i=a(e),r=i.data,n=i.splittedData,o=n.length-1,s=n[o].length,c=r.slice(0,o).join("\n").length,l=(null===(t=r[o-1])||void 0===t?void 0:t.length)||null,d=l>=s?c-l+s:c;e.setSelectionRange(d,d)}(e)}};Object.hasOwn(k,f)&&w[f](c)},g=function(e){var t={lang:e};localStorage.setItem("locale",JSON.stringify(t))},p=function(e,t){var i=t,r=e.querySelector(".field"),n=a(r).splittedData;n.length<12?i.caretPosition=0:i.caretPosition=18*(n.length-1)},h=function(e,t){e.isOpen?t.classList.remove("hidden"):t.classList.add("hidden"),t.querySelector(".field").classList.toggle("hidden-field")};var v=document.createElement("div");v.classList.add("board");var K=function(e){var t=document.createElement("button");return t.classList.add("key"),t.setAttribute("id",e),t};i.forEach((function(e){var t=document.createElement("div");t.classList.add("row");var i=document.createElement("div");i.classList.add("arrows"),e.forEach((function(e){e.includes("Arrow")?function(e,t,i){t.append(K(i)),e.append(t)}(t,i,e):t.append(K(e))})),v.append(t)}));var m=document.createElement("main");m.classList.add("main");var S=document.createElement("section");S.classList.add("keyboard");var L=document.createElement("div");L.classList.add("author-info");var b=document.createElement("span");b.textContent="creeted by ";var D=document.createElement("a");D.classList.add("link"),D.setAttribute("href","https://github.com/Pavelvl21"),D.setAttribute("target","_blank"),D.setAttribute("name","author"),D.textContent="Pavel Yudenka",L.append(b,D);var k=document.createElement("textarea");k.classList.add("field");var w=document.createElement("div");w.classList.add("wrapper");var A=document.createElement("button");A.classList.add("wrapper-button"),w.append(A,k),S.append(w,L,v),m.append(S);const E=m;var C=document.createElement("footer");C.classList.add("footer");var O=document.createElement("h1");O.classList.add("title"),O.textContent="Windows 10 Keyboard";var R=document.createElement("h2");R.classList.add("description"),R.textContent='To change the Keyboard Language use "alt" + "ctrl" keys',C.append(O,R);const j=C;var B=document.body;B.classList.add("body"),B.append(E,j);var P=E.querySelector(".board"),q=E.querySelector(".wrapper-button"),T=E.querySelector(".wrapper"),U={lang:(JSON.parse(localStorage.getItem("locale"))||{lang:"en"}).lang,pressedKey:{},pressedKeys:new Set,isCapsLock:!1,isShifted:!1,isOpen:!1,caretPosition:0};h(U,T),setTimeout((function(){U.isOpen=!0,h(U,T)}),1e3);var x=function(){U.isOpen=!U.isOpen,h(U,T)},M=function(e){var t=e.target,i=t.textContent,r=t.id;U.pressedKey={code:r,key:i},"CapsLock"===r&&!e.repeat&&(U.isCapsLock=!U.isCapsLock),p(E,U),f(U,E)},I=function(e){var t=e.target.id;t&&U.pressedKeys.add(t);var i=U.pressedKey,r=U.pressedKeys,n=i.code,a=r.has("AltLeft")||r.has("AltRight")||"AltLeft"===n||"AltRight"===n,o=r.has("ControlLeft")||r.has("ControlRight")||"ControlLeft"===n||"ControlRight"===n;a&&o&&(U.lang="en"===U.lang?"ru":"en",g(U.lang),f(U,E)),"ShiftLeft"!==t&&"ShiftRight"!==t||(U.isShifted=!U.isShifted,f(U,E))},Q=function(e){var t=e.target.id;t&&(U.pressedKeys.delete(t),f(U,E)),"ShiftLeft"!==t&&"ShiftRight"!==t||(U.isShifted=!U.isShifted,f(U,E))},J=function(e){var t=e.target.id;t&&(U.pressedKeys.delete(t),f(U,E))},N=function(e){var t=e.code,i=e.key,r=e.altKey,n=e.ctrlKey,a=e.shiftKey,o=e.location,s=e.metaKey;t&&(U.pressedKey={code:t,key:i},U.pressedKeys.add(t),e.preventDefault());var c=U.pressedKeys,l=!(1!==o&&2!==o||s||a),d=c.has("AltLeft")||c.has("AltRight")||r,u=c.has("ControlLeft")||c.has("ControlRight")||n;!e.repeat&&d&&u&&l&&(U.lang="en"===U.lang?"ru":"en",g(U.lang),f(U,E)),a&&!e.repeat&&(U.isShifted=!0),"CapsLock"===t&&!e.repeat&&(U.isCapsLock=!U.isCapsLock),p(E,U),f(U,E)},W=function(e){var t=e.code;U.pressedKey={},U.pressedKeys.delete(t),f(U,E),("ShiftLeft"===t||"ShiftRight"===t)&&U.isShifted&&(U.isShifted=!1,f(U,E))};q.addEventListener("click",x),P.addEventListener("click",M),P.addEventListener("mousedown",I),P.addEventListener("mouseup",Q),B.addEventListener("keydown",N),B.addEventListener("keyup",W),E.addEventListener("mouseout",J),f(U,E)})();